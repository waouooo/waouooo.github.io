<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.111.3"><meta name=generator content="Relearn 5.12.3+tip"><meta name=description content="一个很哇塞的博客"><meta name=author content="waouooo"><title>Hugo+Github Pages快速搭建个人博客二: 添加giscus评论系统 :: waouooo</title><link href=https://waouooo.github.io/kuai-su-jian-zhan-202856/step2/index.html rel=canonical type=text/html title="Hugo+Github Pages快速搭建个人博客二: 添加giscus评论系统 :: waouooo"><link href=../../kuai-su-jian-zhan-202856/step2/index.xml rel=alternate type=application/rss+xml title="Hugo+Github Pages快速搭建个人博客二: 添加giscus评论系统 :: waouooo"><link href=../../images/favicon.png?1678961936 rel=icon type=image/png><link href=../../css/fontawesome-all.min.css?1678961936 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fontawesome-all.min.css?1678961936 rel=stylesheet></noscript><link href=../../css/nucleus.css?1678961936 rel=stylesheet><link href=../../css/auto-complete.css?1678961936 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/auto-complete.css?1678961936 rel=stylesheet></noscript><link href=../../css/perfect-scrollbar.min.css?1678961936 rel=stylesheet><link href=../../css/fonts.css?1678961936 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fonts.css?1678961936 rel=stylesheet></noscript><link href=../../css/theme.css?1678961936 rel=stylesheet><link href=../../css/theme-relearn-light.css?1678961936 rel=stylesheet id=variant-style><link href=../../css/variant.css?1678961936 rel=stylesheet><link href=../../css/print.css?1678961936 rel=stylesheet media=print><link href=../../css/format-print.css?1678961936 rel=stylesheet><link href=../../css/ie.css?1678961936 rel=stylesheet><script src=../../js/url.js?1678961936></script>
<script src=../../js/variant.js?1678961936></script>
<script>window.index_js_url="../../index.search.js";var root_url="../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://waouooo.github.io/",window.variants&&variants.init(["relearn-light","relearn-dark","learn","neon","blue","green","red"])</script></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../kuai-su-jian-zhan-202856/step2/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../index.html><span itemprop=name>waouooo</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../kuai-su-jian-zhan-202856/index.html><span itemprop=name>快速建站</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Hugo+Github Pages快速搭建个人博客二: 添加giscus评论系统</span><meta itemprop=position content="3"></li></ol></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags><div class=tags><a class=tag-link href=../../tags/giscus/index.html>giscus</a>
<a class=tag-link href=../../tags/github-pages/index.html>Github Pages</a>
<a class=tag-link href=../../tags/hugo/index.html>Hugo</a>
<a class=tag-link href=../../tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/index.html>个人博客</a>
<a class=tag-link href=../../tags/%E5%BF%AB%E9%80%9F%E5%BB%BA%E7%AB%99/index.html>快速建站</a></div></div><article class=default><h1 id=hugogithub-pages快速搭建个人博客二-添加giscus评论系统>Hugo+Github Pages快速搭建个人博客二: 添加giscus评论系统</h1><h2 id=hugo-theme-relearn-主题添加giscus评论系统>hugo-theme-relearn 主题添加giscus评论系统</h2><p>通过<a href=https://waouooo.github.io/kuai-su-jian-zhan-202856/step1/index.html target=_blank>上文</a>我们已经实现了博客最重要的发布与展示功能，而作为一个技术博客，如果有一个评论系统供读者进行交流是再好不过了。经过对各个评论系统的横向比较，最终选择的giscus作为评论系统的引擎，那么下面就开始将giscus添加至系统中。</p><h4 id=1-安装giscus>1. 安装giscus</h4><p>点击<a href=https://github.com/apps/giscus target=_blank>https://github.com/apps/giscus</a>访问github中的giscus app安装页面,点击install
<a href=#image-3a039a62d320d33ab80a4be8b781eff9 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129170422.png alt=安装giscus style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-3a039a62d320d33ab80a4be8b781eff9><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129170422.png alt=安装giscus class=lightbox-image loading=lazy></a></p><p>选择指定仓库进行安装：
<a href=#image-50e7f823d1b90373d12073e17c7cf037 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129170604.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-50e7f823d1b90373d12073e17c7cf037><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129170604.png alt class=lightbox-image loading=lazy></a></p><p>验证github账号密码
<a href=#image-fea7e14c16bad85bf3e7884671ea88bd class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129170919.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-fea7e14c16bad85bf3e7884671ea88bd><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129170919.png alt class=lightbox-image loading=lazy></a></p><p><a href=#image-cee7b5a0c988a9ab1e7a3f2ecd72d49f class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129172114.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-cee7b5a0c988a9ab1e7a3f2ecd72d49f><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129172114.png alt class=lightbox-image loading=lazy></a>
至此 waouooo.github.io仓库已安装上giscus</p><h4 id=2-打开github仓库的discussions功能>2. 打开Github仓库的Discussions功能</h4><h5 id=1-giscus是由github-discussionshttpsdocsgithubcomzhdiscussions驱动的评论系统因此需要在github上有仓库开启discussions功能对评论进行托管我们这里就直接选择博客站点仓库开启discussions>1) giscus是由 <a href=https://docs.github.com/zh/discussions target=_blank>GitHub Discussions</a> 驱动的评论系统，因此需要在github上有仓库开启Discussions功能对评论进行托管，我们这里就直接选择博客站点仓库开启Discussions:</h5><p><a href=#image-d4e73800739558988d50b7dff09b6e88 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129174008.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-d4e73800739558988d50b7dff09b6e88><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129174008.png alt class=lightbox-image loading=lazy></a></p><h5 id=2-在settings的general栏往下拉找到features>2) 在settings的General栏往下拉，找到Features</h5><p><a href=#image-2e41e4532c5ed7e21aea997bf299bdd4 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129174402.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-2e41e4532c5ed7e21aea997bf299bdd4><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129174402.png alt class=lightbox-image loading=lazy></a></p><h5 id=3-勾选上discussions>3) 勾选✅上Discussions</h5><p><a href=#image-d9615e989d0474959616616821521d91 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129174242.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-d9615e989d0474959616616821521d91><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129174242.png alt class=lightbox-image loading=lazy></a></p><h5 id=4-创建一个discussions-这里选择general作为未来托管评论的category>4) <del>创建一个discussions， 这里选择General作为未来托管评论的category</del></h5><p><a href=#image-4319cac0d6ba69d12224c59290139ab0 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129224749.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-4319cac0d6ba69d12224c59290139ab0><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129224749.png alt class=lightbox-image loading=lazy></a></p><p><a href=#image-07987283c14f8a9619fbb0d0a4b8eec2 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129225452.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-07987283c14f8a9619fbb0d0a4b8eec2><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129225452.png alt class=lightbox-image loading=lazy></a></p><h5 id=5-通过giscus网站httpsgiscusappzh-cn生成配置>5) 通过<a href=https://giscus.app/zh-CN target=_blank>giscus网站</a>生成配置</h5><p><a href=#image-e78b6b0be886463eff8022bca3909bc9 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230206181818.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-e78b6b0be886463eff8022bca3909bc9><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230206181818.png alt class=lightbox-image loading=lazy></a>
<a href=#image-19af30eaacdcbacffff1ca5c4a4946ff class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230206182130.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-19af30eaacdcbacffff1ca5c4a4946ff><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230206182130.png alt class=lightbox-image loading=lazy></a>
<a href=#image-9ae0e758aa7572b7b3b1a6b5cc0a703a class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230206182228.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-9ae0e758aa7572b7b3b1a6b5cc0a703a><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230206182228.png alt class=lightbox-image loading=lazy></a></p><h4 id=3-修改站点目录配置>3. 修改站点目录配置</h4><ol><li>在博客站点根目录中创建文件夹</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 创建目录</span>
</span></span><span class=line><span class=cl>mkdir -pv layouts/partials
</span></span><span class=line><span class=cl>mkdir -pv layouts/_internal
</span></span></code></pre></div><ol start=2><li>拷贝主题项目中<code>layouts/partials</code>下的部分文件至占点根目录的<code>layout/partials</code>中，用于添加giscus评论系统的修改</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 拷贝需要的文件</span>
</span></span><span class=line><span class=cl>cp themes/hugo-theme-relearn/layouts/partials/content-footer.html layouts/partials
</span></span><span class=line><span class=cl>cp themes/hugo-theme-relearn/layouts/partials/custom-comments.html layouts/partials
</span></span><span class=line><span class=cl>cp themes/hugo-theme-relearn/layouts/partials/footer.html layouts/partials
</span></span><span class=line><span class=cl>cp themes/hugo-theme-relearn/layouts/partials/menu-footer.html layouts/partials
</span></span></code></pre></div><ol start=3><li>创建giscus.html文件</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>touch layout/_internal/giscus.html
</span></span></code></pre></div><ol start=4><li>将以下内容拷贝至<code>layout/_internal/giscus.html</code></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  {{ if site.Params.giscus }}
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>#</span><span class=nn>comment</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>padding</span><span class=p>:</span> <span class=mi>8</span><span class=kt>rem</span> <span class=mi>0</span> <span class=mi>2</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=p>#</span><span class=nn>comment</span> <span class=p>.</span><span class=nc>vemoji</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>max-width</span><span class=p>:</span> <span class=mf>1.5</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>max-height</span><span class=p>:</span> <span class=mf>1.5</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;comment&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=c>&lt;!-- 此处的配置可以直接拷贝2.5)通过giscus网站配置生成的script脚本，也可以将配置值抽取出来，参考下文的方式填入config.toml文件 --&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://giscus.app/client.js&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-repo</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_repo}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-repo-id</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_repo_id}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-category</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_category}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-category-id</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_category_id}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-mapping</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_mapping}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-reactions-enabled</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_reactions_enabled}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-emit-metadata</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_emit_metadata}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-input-position</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_input_position }}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-theme</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_theme}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-lang</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_lang}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.crossorigin}}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>data-term</span><span class=o>=</span><span class=s>&#34;{{ .Site.Params.giscus.data_term }}&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>async</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>noscript</span><span class=p>&gt;</span>Please enable JavaScript to view the comments powered by giscus.<span class=p>&lt;/</span><span class=nt>noscript</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  {{ end }}
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><ol start=5><li>修改<code>layouts/partials/custom-comments.html</code>文件，引入上面修改的giscus.html</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- import your comments system
</span></span></span><span class=line><span class=cl><span class=c>{{ template &#34;_internal/disqus.html&#34; . }}
</span></span></span><span class=line><span class=cl><span class=c>--&gt;</span>
</span></span><span class=line><span class=cl>{{ template &#34;_internal/giscus.html&#34; . }}
</span></span></code></pre></div><ol start=6><li>删除<code>layouts/partials/footer.html</code>中 <code>{{- partial "custom-comments.html" . }}</code> （第3行左右）</li><li>在<code>layouts/partials/content-footer.html</code>最后追加<code>{{- partial "custom-comments.html" . }}</code></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>{{- with .Params.LastModifierDisplayName }}
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#39;fas fa-user&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span> {{ with $.Params.LastModifierEmail }}<span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;mailto:{{ . }}&#34;</span><span class=p>&gt;</span>{{ end }}{{ . }}{{ with $.Params.LastModifierEmail }}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>{{ end }}
</span></span><span class=line><span class=cl>  {{- with $.Date }}
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#39;fas fa-calendar&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span> {{ . | time.Format &#34;:date_medium&#34; }}
</span></span><span class=line><span class=cl>  {{- end }}
</span></span><span class=line><span class=cl>{{- end }}
</span></span><span class=line><span class=cl>{{- partial &#34;custom-comments.html&#34; . }}
</span></span></code></pre></div><ol start=8><li>自定义<code>layouts/partials/menu-footer.html</code>中的内容，也可不修改</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>		<span class=p>#</span><span class=nn>footer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		  <span class=k>font-size</span><span class=p>:</span> <span class=mi>13</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		  <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		  <span class=k>margin-left</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		  <span class=k>margin-right</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		  <span class=k>padding</span><span class=p>:</span> <span class=mi>2</span><span class=kt>rem</span> <span class=mi>1</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		  <span class=k>text-align</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		  <span class=k>min-width</span><span class=p>:</span> <span class=mi>230</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		  <span class=k>max-width</span><span class=p>:</span> <span class=mi>300</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>#</span><span class=nn>footer</span> <span class=nt>p</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		  <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	  <span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>Built with <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://github.com/McShelby/hugo-theme-relearn&#34;</span> <span class=na>title</span><span class=o>=</span><span class=s>&#34;love&#34;</span><span class=p>&gt;&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;fas fa-heart&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;&lt;/</span><span class=nt>a</span><span class=p>&gt;</span> by <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://gohugo.io/&#34;</span><span class=p>&gt;</span>Hugo<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	  <span class=p>&lt;</span><span class=nt>script</span> <span class=na>async</span><span class=o>=</span><span class=s>&#34;&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../../js/buttons.js?1674688248&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   
</span></span></code></pre></div><h4 id=4-修改configtoml文件>4. 修改config.toml文件</h4><ol><li>若<code>layout/_internal/giscus.html</code>文件中giscus的script脚本参数通过配置提取，则添加以下giscus配置至config.toml 中, <code>data_repo</code>, <code>data_repo_id</code>, <code>data_category</code> <code>data_category_id</code> 这四个参数为上文中开启discussions仓库的数据, <code>data_category</code>使用上文的General。其中的值与<a href=https://waouooo.github.io/kuai-su-jian-zhan-202856/step2/index.html#5-%E9%80%9A%E8%BF%87giscus%E7%BD%91%E7%AB%99httpsgiscusappzh-cn%E7%94%9F%E6%88%90%E9%85%8D%E7%BD%AE target=_blank>上文</a>giscus官网配置得到的值一致</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>params</span><span class=p>.</span><span class=nx>giscus</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_repo</span><span class=p>=</span><span class=s2>&#34;waouooo/waouooo.github.io&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_repo_id</span><span class=p>=</span><span class=s2>&#34;*****&#34;</span>    
</span></span><span class=line><span class=cl>  <span class=nx>data_category</span><span class=p>=</span><span class=s2>&#34;General&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_category_id</span><span class=p>=</span><span class=s2>&#34;*****&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_mapping</span><span class=p>=</span><span class=s2>&#34;pathname&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_reactions_enabled</span><span class=p>=</span><span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_emit_metadata</span><span class=p>=</span><span class=s2>&#34;0&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_theme</span><span class=p>=</span><span class=s2>&#34;dark&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_lang</span><span class=p>=</span><span class=s2>&#34;zh-CN&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_input_position</span><span class=p>=</span><span class=s2>&#34;top&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>data_term</span><span class=p>=</span><span class=s2>&#34;1046&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>crossorigin</span><span class=p>=</span><span class=s2>&#34;anonymous&#34;</span>
</span></span></code></pre></div><ol start=2><li><del>通过<a href=https://docs.github.com/en/graphql/overview/explorer target=_blank>GitHub GraphQL API</a> 查询repo_id 和category_id 的内容</del></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>resource(url:</span> <span class=nt>&#34;https://github.com/waouooo/waouooo.github.io&#34;</span><span class=err>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>...</span> <span class=err>on</span> <span class=err>Repository</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>      <span class=err>id</span>
</span></span><span class=line><span class=cl>      <span class=err>name</span>
</span></span><span class=line><span class=cl>      <span class=err>discussion(number:</span> <span class=err>1)</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>        <span class=err>category</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>          <span class=err>id</span>
</span></span><span class=line><span class=cl>          <span class=err>name</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=err>}</span>
</span></span><span class=line><span class=cl>  <span class=err>}</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></div><p><a href=#image-666143475195c380452becc6c00a9009 class=lightbox-link><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129225750.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-666143475195c380452becc6c00a9009><img src=https://raw.githubusercontent.com/zhou-yi-git/picture-bed/master/images/202301/20230129225750.png alt class=lightbox-image loading=lazy></a></p><ol start=3><li><del>将查询到的结果回填至config.toml文件的**** 中</del></li></ol><h4 id=5-重新生成静态页面上传至仓库中>5. 重新生成静态页面，上传至仓库中</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>hugo -d dist
</span></span><span class=line><span class=cl><span class=nb>cd</span> dist
</span></span><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;add giscus&#34;</span>
</span></span><span class=line><span class=cl>git push
</span></span></code></pre></div><p>上传成功后等待编译部署完即可查看页面是否成功添加了giscus评论系统了</p><h3 id=参考链接>参考链接</h3><p><a href=https://zhauniarovich.com/post/2021/2021-06-giscus/ target=_blank>Giscus: The New Commenting Engine for My Website</a></p><p><a href=https://xwi88.com/hugo-plugin-giscus-support/ target=_blank>Hugo Plugin Giscus Support</a></p><footer class=footline><div><style>#comment{padding:8rem 0 2rem}#comment .vemoji{max-width:1.5em;max-height:1.5em}</style><div id=comment><script src=https://giscus.app/client.js data-repo=waouooo/discussions data-repo-id=R_kgDOI-EgHQ data-category=General data-category-id=DIC_kwDOI-EgHc4CUORS data-mapping=pathname data-strict=1 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div><noscript>Please enable JavaScript to view the comments powered by giscus.</noscript></div></footer></article></div></main></div><script src=../../js/clipboard.min.js?1678961936 defer></script>
<script src=../../js/perfect-scrollbar.min.js?1678961936 defer></script>
<script src=../../js/featherlight.min.js?1678961936 defer></script>
<script src=../../js/theme.js?1678961936 defer></script></body></html>